<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ManagerDo">
    <typeAlias alias="managerDo" type="com.jiankong.admin.domain.ManagerDo"/>
	<resultMap id="manager_result" class="managerDo">
		<result property="id" column="id" jdbcType="int" />
		<result property="username" column="username" jdbcType="string" />
		<result property="password" column="password" jdbcType="string" />
		<result property="role" column="role" jdbcType="int" />
		<result property="status" column="status" jdbcType="int" />
	</resultMap>
	<sql id="all_manager_column">
	id,username,password,role,status
	</sql>
	
	<select id="Manager.getManagerByUsername" parameterClass="java.lang.String" resultClass="managerDo">
	select <include refid="all_manager_column" /> from managers where username = #username# and status = 1
	
	</select>
	
	<insert id="Manager.insertManager" parameterClass="managerDo">
	insert into managers values(null,#username#,#password#,default,default)
	<selectKey resultClass="java.lang.Integer"  keyProperty="id">
		select max(id) from managers
	</selectKey> 
	</insert> 
	
	<update id="Manager.deleteManager" parameterClass="java.lang.Integer">
	update managers set status = 0 where id = #id#
	
	</update>
	
	<update id="Manager.updateManager" parameterClass="managerDo" >
	update managers set password=#password# where id=#id#
	</update>
	
	<select id="Manager.getAllManager" resultMap="manager_result">
	select <include refid="all_manager_column" /> from managers where status = 1
	</select>
	
	<select id="Manager.getAllRecord" resultClass = "java.lang.Integer">
	select count(*) from managers where status = 1
	</select>
	
    <select id="Manager.getManagerById" parameterClass ="java.lang.Integer" resultClass="managerDo">
    select <include refid="all_manager_column" /> from managers where status = 1 and id = #id#
    </select>
</sqlMap>