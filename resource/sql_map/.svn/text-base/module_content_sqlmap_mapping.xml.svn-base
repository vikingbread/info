<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ModuleContentDo">
	<typeAlias alias="moduleContentDo" type="com.jiankong.admin.domain.ModuleContentDo" />
    <resultMap id="moduleContent_result"  class="moduleContentDo">
      <result property="id" column="id" jdbcType="int" />
      <result property="moduleId" column="module_id" jdbcType="int" />
      <result property="contentId" column="content_id" jdbcType="int" />
      <result property="display" column="display" jdbcType="int" />
      <result property="property" column="property" jdbcType="String" />
    </resultMap>
	
	<sql id="all_module_content_column">
	id,module_id,content_id,display,property
	</sql>
	
	<select id="ModuleContent.queryModuleContentListByModuleId" parameterClass="java.lang.Integer" resultMap= "moduleContent_result">
	select <include refid="all_module_content_column"/> from module_content where module_id = #module_id# 
	
	</select>
	<select id="ModuleContent.queryModuleIdListByContentId" resultClass= "java.lang.Integer">
	select module_id from module_content where content_id = #content_id# and property=#property#
	</select>
	
	<select id="ModuleContent.getCountByModuleId"  resultClass= "java.lang.Integer">
	select count(*) from module_content where module_id = #module_id#
	</select>
	
	<select id="ModuleContent.getUnDisplayCountByModuleId" resultClass = "java.lang.Integer">
	select count(*) from module_content where module_id = #module_id# and display = 0
	</select>
	
	<select id="ModuleContent.getDisplayCountByModuleId" resultClass = "java.lang.Integer">
	select count(*) from module_content where module_id = #module_id# and display>0
	</select>

	<select id="ModuleContent.queryModuleContentListByModuleIdList" resultMap= "moduleContent_result">
		select <include refid="all_module_content_column"/> from module_content where module_id in  
			<iterate property="moduleIdList"  open="(" close=")"  conjunction=",">
    					#moduleIdList[]#   
	    	</iterate>
	</select>
	
	<select id="ModuleContent.queryModuleContentListByContentIdList" resultMap= "moduleContent_result">
		select <include refid="all_module_content_column"/> from module_content where property=#property# and content_id in  
			<iterate property="contentIdList"  open="(" close=")"  conjunction=",">
    					#contentIdList[]#   
	    	</iterate>
	</select>
	
	<select id="ModuleContent.queryModuleContentListByContentIdListAndModuleId" resultMap= "moduleContent_result">
		select <include refid="all_module_content_column"/> from module_content where module_id=#module_id# and content_id in  
			<iterate property="contentIdList"  open="(" close=")"  conjunction=",">
    					#contentIdList[]#   
	    	</iterate>  and display >0
	</select>
	
	
     <insert id="ModuleContent.insertModuleContentList" parameterClass="java.util.List">  
        <![CDATA[ 
           insert into module_content(id,module_id,content_id,display,property)  values 
        ]]>  
        <iterate conjunction=",">  
            <![CDATA[ 
                (#moduleContentDo[].id#, #moduleContentDo[].moduleId#, #moduleContentDo[].contentId#,#moduleContentDo[].display#,#moduleContentDo[].property#) 
            ]]>  
        </iterate>  
    </insert>  
	<delete id="ModuleContent.deleteModuleContentByContentId" >  
           delete from module_content where content_id = #content_id# and property=#property#
    </delete>  
    
    <delete id="ModuleContent.deleteModuleContentByModuleId" parameterClass="java.lang.Integer">  
           delete from module_content where module_id = #module_id# 
    </delete>  
		
	<update id="ModuleContent.updateModuleContent" parameterClass = "moduleContentDo">
           update module_content set display = #display# where module_id =#moduleId# and content_id = #contentId#
	</update>
	
	<delete id="ModuleContent.deleteModuleContent" parameterClass = "moduleContentDo">
	       delete from module_content where module_id = #moduleId# and content_id = #contentId#
	</delete>
	

   <select id="ModuleContent.queryDisplayContentIdListByModuleId" parameterClass="java.lang.Integer" resultClass= "java.lang.Long" >
	select content_id from module_content where display>0 and module_id = #module_id#  order by display ASC
	
	</select>
	
	<select id="ModuleContent.getMaxDisplay" parameterClass = "java.lang.Integer" resultClass = "java.lang.Integer">
	select max(display) from module_content where module_id = #module_id#
	</select>
	<select id="ModuleContent.queryUnDispalyContentIdListByModuleId" parameterClass = "java.lang.Integer" resultClass = "java.lang.Long">
	select content_id from module_content where module_id = #module_id# and display = 0
	</select>
	
</sqlMap>